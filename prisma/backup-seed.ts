import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

async function main() {
  console.log('üå± Iniciando backup seed do banco de dados...');
  
  const slugify = (s: string) =>
    s.normalize("NFD").replace(/[\u0300-\u036f]/g, "")
     .toLowerCase().replace(/[^a-z0-9]+/g, "-")
     .replace(/(^-|-$)+/g, "").slice(0, 64);

  // Limpar dados existentes (opcional - comente se n√£o quiser limpar)
  console.log('üßπ Limpando dados existentes...');
  await prisma.agentExecution.deleteMany();
  await prisma.execution.deleteMany();
  await prisma.learning.deleteMany();
  await prisma.agentMetrics.deleteMany();
  await prisma.task.deleteMany();
  await prisma.contract.deleteMany();
  await prisma.report.deleteMany();
  await prisma.composition.deleteMany();
  await prisma.agent.deleteMany();
  await prisma.workspace.deleteMany();
  await prisma.project.deleteMany();
  await prisma.client.deleteMany();
  await prisma.company.deleteMany();
  await prisma.user.deleteMany();
  // MCP tables might not exist in all environments, so we'll skip them for now
  try {
    await prisma.mCPConnection.deleteMany();
    await prisma.mCPTool.deleteMany();
    await prisma.mCPServer.deleteMany();
  } catch (error) {
    console.log('‚ö†Ô∏è MCP tables not found, skipping...');
  }
  await prisma.auditLog.deleteMany();

  // Criar usu√°rios principais
  console.log('üë• Criando usu√°rios principais...');
  const usersData = [
    {
      email: 'superadmin@zanai.com',
      name: 'Super Administrador',
      role: 'SUPER_ADMIN',
    },
    {
      email: 'company.admin@empresa.com',
      name: 'Administrador da Empresa',
      role: 'COMPANY_ADMIN',
    },
    {
      email: 'company.user@empresa.com',
      name: 'Usu√°rio da Empresa',
      role: 'COMPANY_USER',
    },
    {
      email: 'free.user@zanai.com',
      name: 'Usu√°rio Gratuito',
      role: 'FREE',
    },
    {
      email: 'iniciante.user@zanai.com',
      name: 'Usu√°rio Iniciante',
      role: 'INICIANTE',
    },
    {
      email: 'profissional.user@zanai.com',
      name: 'Usu√°rio Profissional',
      role: 'PROFISSIONAL',
    },
  ];

  const createdUsers = [];
  for (const userData of usersData) {
    try {
      const user = await prisma.user.create({
        data: userData,
      });
      createdUsers.push(user);
      console.log(`‚úÖ Usu√°rio criado: ${user.name} (${user.role})`);
    } catch (error) {
      console.log(`‚ö†Ô∏è Usu√°rio j√° existe ou erro ao criar: ${userData.name}`);
      // Buscar usu√°rio existente
      const existingUser = await prisma.user.findUnique({
        where: { email: userData.email },
      });
      if (existingUser) {
        createdUsers.push(existingUser);
      }
    }
  }

  const [superAdmin, companyAdmin, companyUser, freeUser, inicianteUser, profissionalUser] = createdUsers;

  // Criar empresas
  console.log('üè¢ Criando empresas...');
  const companiesData = [
    {
      name: 'TechCorp Solutions',
      cnpj: '12.345.678/0001-90',
      email: 'contato@techcorp.com',
      phone: '(11) 3456-7890',
      address: 'Av. Paulista, 1000',
      city: 'S√£o Paulo',
      state: 'SP',
      zipCode: '01310-100',
      plan: 'premium',
      maxUsers: 20,
    },
    {
      name: 'Startup XYZ',
      cnpj: '98.765.432/0001-10',
      email: 'hello@startupxyz.com',
      phone: '(21) 2345-6789',
      address: 'Rua das Startups, 500',
      city: 'Rio de Janeiro',
      state: 'RJ',
      zipCode: '20040-020',
      plan: 'basic',
      maxUsers: 5,
    },
  ];

  const createdCompanies = [];
  for (const companyData of companiesData) {
    try {
      const company = await prisma.company.create({
        data: companyData,
      });
      createdCompanies.push(company);
      console.log(`‚úÖ Empresa criada: ${company.name}`);
    } catch (error) {
      console.log(`‚ö†Ô∏è Empresa j√° existe ou erro ao criar: ${companyData.name}`);
      // Buscar empresa existente
      const existingCompany = await prisma.company.findUnique({
        where: { cnpj: companyData.cnpj },
      });
      if (existingCompany) {
        createdCompanies.push(existingCompany);
      }
    }
  }

  const [techCorp, startupXYZ] = createdCompanies;

  // Criar clientes
  console.log('üë§ Criando clientes...');
  const clientsData = [
    {
      name: 'Pedro Oliveira',
      cpf: '123.456.789-00',
      email: 'pedro.oliveira@email.com',
      phone: '(11) 98765-4321',
      address: 'Rua das Flores, 123',
      city: 'S√£o Paulo',
      state: 'SP',
      zipCode: '01234-567',
      birthDate: new Date('1985-05-15'),
      userId: freeUser?.id,
    },
    {
      name: 'Ana Costa',
      cpf: '987.654.321-00',
      email: 'ana.costa@email.com',
      phone: '(21) 99876-5432',
      address: 'Av. Atl√¢ntica, 200',
      city: 'Rio de Janeiro',
      state: 'RJ',
      zipCode: '22070-000',
      birthDate: new Date('1990-08-22'),
    },
  ];

  const createdClients = [];
  for (const clientData of clientsData) {
    try {
      const client = await prisma.client.create({
        data: clientData,
      });
      createdClients.push(client);
      console.log(`‚úÖ Cliente criado: ${client.name}`);
    } catch (error) {
      console.log(`‚ö†Ô∏è Cliente j√° existe ou erro ao criar: ${clientData.name}`);
      // Buscar cliente existente
      const existingClient = await prisma.client.findUnique({
        where: { cpf: clientData.cpf },
      });
      if (existingClient) {
        createdClients.push(existingClient);
      }
    }
  }

  const [client1, client2] = createdClients;

  // Criar workspaces para cada tipo de usu√°rio
  console.log('üèóÔ∏è Criando workspaces...');
  const workspacesData = [
    {
      name: 'Workspace Super Admin',
      description: 'Workspace para Super Administrador',
      config: JSON.stringify({
        theme: 'dark',
        language: 'pt-BR',
        autoSave: true,
        adminAccess: true,
      }),
      userId: superAdmin?.id || '',
    },
    {
      name: 'Workspace Empresa Admin',
      description: 'Workspace para Administrador da Empresa',
      config: JSON.stringify({
        theme: 'system',
        language: 'pt-BR',
        autoSave: true,
        notifications: true,
      }),
      userId: companyAdmin?.id || '',
    },
    {
      name: 'Workspace Empresa User',
      description: 'Workspace para Usu√°rio da Empresa',
      config: JSON.stringify({
        theme: 'light',
        language: 'pt-BR',
        autoSave: false,
      }),
      userId: companyUser?.id || '',
    },
    {
      name: 'Workspace Gratuito',
      description: 'Workspace para Usu√°rio Gratuito',
      config: JSON.stringify({
        theme: 'light',
        language: 'pt-BR',
        autoSave: false,
        limitedFeatures: true,
      }),
      userId: freeUser?.id || '',
    },
    {
      name: 'Workspace Iniciante',
      description: 'Workspace para Usu√°rio Iniciante',
      config: JSON.stringify({
        theme: 'system',
        language: 'pt-BR',
        autoSave: true,
        intermediateFeatures: true,
      }),
      userId: inicianteUser?.id || '',
    },
    {
      name: 'Workspace Profissional',
      description: 'Workspace para Usu√°rio Profissional',
      config: JSON.stringify({
        theme: 'dark',
        language: 'pt-BR',
        autoSave: true,
        fullFeatures: true,
      }),
      userId: profissionalUser?.id || '',
    },
  ];

  const createdWorkspaces = [];
  for (const workspaceData of workspacesData) {
    try {
      const workspace = await prisma.workspace.create({
        data: workspaceData,
      });
      createdWorkspaces.push(workspace);
      console.log(`‚úÖ Workspace criado: ${workspace.name}`);
    } catch (error) {
      console.log(`‚ö†Ô∏è Workspace j√° existe ou erro ao criar: ${workspaceData.name}`);
      // Buscar workspace existente
      const existingWorkspace = await prisma.workspace.findFirst({
        where: { 
          name: workspaceData.name,
          userId: workspaceData.userId,
        },
      });
      if (existingWorkspace) {
        createdWorkspaces.push(existingWorkspace);
      }
    }
  }

  const [workspaceSuperAdmin, workspaceCompanyAdmin, workspaceCompanyUser, workspaceFree, workspaceIniciante, workspaceProfissional] = createdWorkspaces;

  // Criar agentes profissionais no workspace do Super Admin
  console.log('ü§ñ Criando agentes profissionais templates...');
  const professionalAgentsData = [
    // Agentes de Estrat√©gia e Neg√≥cios
    {
      name: 'Consultor de Estrat√©gia',
      description: 'Especialista em planejamento estrat√©gico, consultoria de neg√≥cios e transforma√ß√£o organizacional',
      type: 'template',
      config: `role: Strategic Consultant
expertise:
  - Planejamento estrat√©gico
  - Consultoria de neg√≥cios
  - Transforma√ß√£o organizacional
  - An√°lise de mercado
  - Gest√£o de mudan√ßas
personality: estrat√©gico, anal√≠tico, vision√°rio`,
      knowledge: `# Conhecimento do Consultor de Estrat√©gia

## Planejamento Estrat√©gico
- An√°lise SWOT
- Defini√ß√£o de vis√£o e miss√£o
- Estabelecimento de objetivos estrat√©gicos
- Planejamento de longo prazo
- Alinhamento organizacional

## Consultoria de Neg√≥cios
- Diagn√≥stico organizacional
- Otimiza√ß√£o de processos
- Redesenho organizacional
- Gest√£o da mudan√ßa
- Melhoria cont√≠nua

## Transforma√ß√£o Organizacional
- Lideran√ßa transformacional
- Cultura organizacional
- Inova√ß√£o e disruptura
- Gest√£o da complexidade
- Resili√™ncia organizacional`,
      status: 'active',
      workspaceId: workspaceSuperAdmin?.id || '',
      userId: superAdmin?.id,
    },
    {
      name: 'Especialista em Dados',
      description: 'Especialista em an√°lise de dados, business intelligence e data science',
      type: 'template',
      config: `role: Data Specialist
expertise:
  - An√°lise de dados
  - Business Intelligence
  - Data Science
  - Machine Learning
  - Visualiza√ß√£o de dados
personality: anal√≠tico, preciso, curioso`,
      knowledge: `# Conhecimento do Especialista em Dados

## An√°lise de Dados
- Estat√≠stica descritiva e inferencial
- An√°lise explorat√≥ria de dados
- Segmenta√ß√£o e clustering
- S√©ries temporais
- An√°lise preditiva

## Business Intelligence
- Dashboards e relat√≥rios
- KPIs e m√©tricas
- Data warehousing
- ETL e data pipelines
- Governan√ßa de dados

## Data Science
- Machine Learning
- Deep Learning
- Processamento de linguagem natural
- Vis√£o computacional
- Modelagem preditiva`,
      status: 'active',
      workspaceId: workspaceSuperAdmin?.id || '',
      userId: superAdmin?.id,
    },
    {
      name: 'Agente de Automa√ß√£o Inteligente',
      description: 'Especialista em automa√ß√£o de processos usando IA e machine learning',
      type: 'template',
      config: `role: Intelligent Automation Agent
expertise:
  - Automa√ß√£o de processos
  - Machine Learning aplicado
  - RPA (Robotic Process Automation)
  - Processamento de linguagem natural
  - Vis√£o computacional
personality: inovador, eficiente, t√©cnico`,
      knowledge: `# Conhecimento do Agente de Automa√ß√£o Inteligente

## Automa√ß√£o de Processos
- Identifica√ß√£o de processos automatiz√°veis
- Mapeamento e otimiza√ß√£o de fluxos
- Implementa√ß√£o de RPA
- Monitoramento e manuten√ß√£o
- Gest√£o de exce√ß√µes

## Machine Learning Aplicado
- Classifica√ß√£o e regress√£o
- Clusteriza√ß√£o e segmenta√ß√£o
- Processamento de linguagem natural
- Vis√£o computacional
- Aprendizado por refor√ßo

## Integra√ß√£o e Deploy
- APIs e microservi√ßos
- Containeriza√ß√£o
- CI/CD para modelos
- Monitoramento de modelos
- Versionamento de dados`,
      status: 'active',
      workspaceId: workspaceSuperAdmin?.id || '',
      userId: superAdmin?.id,
    },
    {
      name: 'Arquiteto de Workflows',
      description: 'Especialista em design e arquitetura de workflows complexos no Flowise',
      type: 'template',
      config: `role: Workflow Architect
expertise:
  - Design de workflows
  - Arquitetura de sistemas
  - Integra√ß√£o de APIs
  - Gest√£o de processos
  - Otimiza√ß√£o de fluxos
personality: arquitet√¥nico, sistem√°tico, criativo`,
      knowledge: `# Conhecimento do Arquiteto de Workflows

## Design de Workflows
- An√°lise de requisitos
- Modelagem de processos
- Design de fluxos
- Documenta√ß√£o de workflows
- Valida√ß√£o e teste

## Arquitetura de Sistemas
- Microservi√ßos
- APIs RESTful
- Event-driven architecture
- Message queues
- Database design

## Integra√ß√£o e Otimiza√ß√£o
- Conectores e adaptadores
- Transforma√ß√£o de dados
- Gest√£o de erros
- Performance tuning
- Escalabilidade`,
      status: 'active',
      workspaceId: workspaceSuperAdmin?.id || '',
      userId: superAdmin?.id,
    },
    {
      name: 'Integrador Flowise',
      description: 'Especialista em integra√ß√£o entre Zanai e Flowise para automa√ß√£o de workflows',
      type: 'template',
      config: `role: Flowise Integration Specialist
expertise:
  - Integra√ß√£o Zanai-Flowise
  - Automa√ß√£o de workflows
  - Configura√ß√£o de chatflows
  - Sincroniza√ß√£o de dados
  - API management
personality: t√©cnico, organizado, inovador`,
      knowledge: `# Conhecimento do Integrador Flowise

## Integra√ß√£o Zanai-Flowise
- Configura√ß√£o de APIs entre plataformas
- Mapeamento de agentes Zanai para chatflows Flowise
- Sincroniza√ß√£o de dados em tempo real
- Gest√£o de autentica√ß√£o e seguran√ßa
- Monitoramento de integra√ß√£o

## Automa√ß√£o de Workflows
- Cria√ß√£o de fluxos automatizados
- Configura√ß√£o de gatilhos e a√ß√µes
- Gerenciamento de vari√°veis e contextos
- Tratamento de erros e exce√ß√µes
- Otimiza√ß√£o de performance

## Gest√£o de Chatflows
- Importa√ß√£o e exporta√ß√£o de chatflows
- Versionamento de workflows
- Teste e valida√ß√£o de fluxos
- Documenta√ß√£o autom√°tica
- Deploy e rollback`,
      status: 'active',
      workspaceId: workspaceSuperAdmin?.id || '',
      userId: superAdmin?.id,
    },
    // Agentes de Vendas e Marketing
    {
      name: 'Agente de Vendas',
      description: 'Especialista em t√©cnicas de vendas, negocia√ß√£o e fechamento de neg√≥cios',
      type: 'template',
      config: `role: Sales Agent
expertise:
  - T√©cnicas de vendas
  - Negocia√ß√£o
  - Fechamento de neg√≥cios
  - CRM e gest√£o de relacionamentos
  - Prospec√ß√£o de clientes
personality: persuasivo, confiante, estrat√©gico`,
      knowledge: `# Conhecimento do Agente de Vendas

## T√©cnicas de Vendas
- Venda consultiva
- SPIN Selling
- Venda por valor
- T√©cnicas de fechamento
- Gest√£o de obje√ß√µes

## Negocia√ß√£o
- Estrat√©gias de negocia√ß√£o
- Psicologia da negocia√ß√£o
- T√©cnicas de persuas√£o
- Gest√£o de conflitos
- Win-win negotiation

## Gest√£o Comercial
- CRM e pipeline de vendas
- Prospec√ß√£o ativa
- Qualifica√ß√£o de leads
- Follow-up e relacionamento
- Metas e comissionamento`,
      status: 'active',
      workspaceId: workspaceSuperAdmin?.id || '',
      userId: superAdmin?.id,
    },
    {
      name: 'Agente de Marketing Digital',
      description: 'Especialista em estrat√©gias de marketing, SEO, redes sociais e conte√∫do',
      type: 'template',
      config: `role: Digital Marketing Agent
expertise:
  - Marketing digital
  - SEO e SEM
  - Redes sociais
  - Content marketing
  - Email marketing
personality: criativo, anal√≠tico, comunicativo`,
      knowledge: `# Conhecimento do Agente de Marketing Digital

## Marketing Digital
- Estrat√©gias digitais
- Marketing de conte√∫do
- Inbound marketing
- Marketing de performance
- An√°lise de ROI

## SEO e SEM
- Otimiza√ß√£o para buscadores
- Pesquisa de palavras-chave
- Link building
- Google Ads
- An√°lise de tr√°fego

## Redes Sociais
- Estrat√©gia de conte√∫do
- Gest√£o de comunidades
- An√∫ncios pagos
- Influencer marketing
- Social listening`,
      status: 'active',
      workspaceId: workspaceSuperAdmin?.id || '',
      userId: superAdmin?.id,
    },
    // Agentes de Tecnologia
    {
      name: 'Consultor de TI',
      description: 'Especialista em consultoria de tecnologia, arquitetura de sistemas e transforma√ß√£o digital',
      type: 'template',
      config: `role: IT Consultant
expertise:
  - Consultoria de tecnologia
  - Arquitetura de sistemas
  - Transforma√ß√£o digital
  - Gest√£o de projetos
  - Seguran√ßa da informa√ß√£o
personality: t√©cnico, estrat√©gico, inovador`,
      knowledge: `# Conhecimento do Consultor de TI

## Consultoria de Tecnologia
- Avalia√ß√£o de sistemas
- Recomenda√ß√µes t√©cnicas
- Planejamento de infraestrutura
- Otimiza√ß√£o de recursos
- Governan√ßa de TI

## Arquitetura de Sistemas
- Design de sistemas
- Integra√ß√£o de plataformas
- Microservi√ßos
- Cloud computing
- DevOps

## Transforma√ß√£o Digital
- Estrat√©gia digital
- Inova√ß√£o tecnol√≥gica
- Gest√£o da mudan√ßa
- Cultura digital
- Agilidade organizacional`,
      status: 'active',
      workspaceId: workspaceSuperAdmin?.id || '',
      userId: superAdmin?.id,
    },
    {
      name: 'Assistente de E-commerce',
      description: 'Especialista em vendas online, atendimento ao cliente e gest√£o de loja virtual',
      type: 'template',
      config: `role: E-commerce Assistant
expertise:
  - Vendas online
  - Gest√£o de loja virtual
  - Atendimento ao cliente
  - Log√≠stica e fulfillment
  - Marketing digital
personality: din√¢mico, focado no cliente, organizado`,
      knowledge: `# Conhecimento do Assistente de E-commerce

## Vendas Online
- Plataformas de e-commerce
- Gest√£o de cat√°logo
- Precifica√ß√£o e promo√ß√µes
- Checkout e pagamento
- Convers√£o de vendas

## Gest√£o de Loja Virtual
- Design de UX/UI
- Otimiza√ß√£o de convers√£o
- Gest√£o de estoque
- An√°lise de vendas
- Relat√≥rios e m√©tricas

## Atendimento e Log√≠stica
- Suporte ao cliente
- Gest√£o de pedidos
- Log√≠stica e entrega
- Trocas e devolu√ß√µes
- Fideliza√ß√£o de clientes`,
      status: 'active',
      workspaceId: workspaceSuperAdmin?.id || '',
      userId: superAdmin?.id,
    },
    // Agentes de Opera√ß√µes e Gest√£o
    {
      name: 'Especialista em Log√≠stica',
      description: 'Especialista em gest√£o da cadeia de suprimentos, log√≠stica e opera√ß√µes',
      type: 'template',
      config: `role: Logistics Specialist
expertise:
  - Gest√£o da cadeia de suprimentos
  - Log√≠stica
  - Opera√ß√µes
  - Gest√£o de estoque
  - Transporte e distribui√ß√£o
personality: organizado, anal√≠tico, eficiente`,
      knowledge: `# Conhecimento do Especialista em Log√≠stica

## Gest√£o da Cadeia de Suprimentos
- Planejamento de demanda
- Gest√£o de fornecedores
- Compras estrat√©gicas
- Gest√£o de contratos
- Relacionamento com fornecedores

## Log√≠stica
- Armazenamento
- Transporte
- Distribui√ß√£o
- Gest√£o de frota
- Roteiriza√ß√£o

## Opera√ß√µes
- Gest√£o de estoque
- Controle de qualidade
- Processos operacionais
- Melhoria cont√≠nua
- Otimiza√ß√£o de recursos`,
      status: 'active',
      workspaceId: workspaceSuperAdmin?.id || '',
      userId: superAdmin?.id,
    },
    {
      name: 'Agente de Recursos Humanos',
      description: 'Especialista em gest√£o de talentos, recrutamento e desenvolvimento organizacional',
      type: 'template',
      config: `role: Human Resources Agent
expertise:
  - Gest√£o de talentos
  - Recrutamento e sele√ß√£o
  - Desenvolvimento organizacional
  - Gest√£o de desempenho
  - Cultura organizacional
personality: humano, estrat√©gico, comunicativo`,
      knowledge: `# Conhecimento do Agente de Recursos Humanos

## Gest√£o de Talentos
- Atra√ß√£o de talentos
- Reten√ß√£o de talentos
- Planejamento de sucess√£o
- Desenvolvimento de lideran√ßa
- Gest√£o de carreiras

## Recrutamento e Sele√ß√£o
- Processos seletivos
- Entrevistas
- Avalia√ß√£o de compet√™ncias
- Onboarding
- Integra√ß√£o de novos colaboradores

## Desenvolvimento Organizacional
- Treinamento e desenvolvimento
- Gest√£o de desempenho
- Cultura organizacional
- Clima organizacional
- Mudan√ßa organizacional`,
      status: 'active',
      workspaceId: workspaceSuperAdmin?.id || '',
      userId: superAdmin?.id,
    },
    // Agentes Financeiros
    {
      name: 'Consultor Financeiro',
      description: 'Especialista em an√°lise financeira, planejamento or√ßament√°rio e consultoria de investimentos',
      type: 'template',
      config: `role: Financial Consultant
expertise:
  - An√°lise financeira
  - Planejamento or√ßament√°rio
  - Consultoria de investimentos
  - Gest√£o de risco
  - Controle financeiro
personality: anal√≠tico, preciso, estrat√©gico`,
      knowledge: `# Conhecimento do Consultor Financeiro

## An√°lise Financeira
- An√°lise de demonstra√ß√µes
- Indicadores financeiros
- An√°lise de rentabilidade
- Fluxo de caixa
- An√°lise de investimento

## Planejamento Or√ßament√°rio
- Elabora√ß√£o de or√ßamentos
- Controle or√ßament√°rio
- Proje√ß√µes financeiras
- An√°lise de varia√ß√µes
- Otimiza√ß√£o de recursos

## Consultoria de Investimentos
- An√°lise de investimentos
- Gest√£o de portf√≥lio
- Risco e retorno
- Diversifica√ß√£o
- Planejamento financeiro pessoal`,
      status: 'active',
      workspaceId: workspaceSuperAdmin?.id || '',
      userId: superAdmin?.id,
    },
    // Agentes de Servi√ßos Profissionais
    {
      name: 'Especialista em Educa√ß√£o',
      description: 'Especialista em m√©todos de ensino, planejamento educacional e tutoria',
      type: 'template',
      config: `role: Education Specialist
expertise:
  - M√©todos de ensino
  - Planejamento educacional
  - Tutoria
  - Tecnologia educacional
  - Avalia√ß√£o de aprendizagem
personality: paciente, educador, inovador`,
      knowledge: `# Conhecimento do Especialista em Educa√ß√£o

## M√©todos de Ensino
- Pedagogia e andragogia
- M√©todos ativos de aprendizagem
- Aprendizagem colaborativa
- Gamifica√ß√£o
- Ensino h√≠brido

## Planejamento Educacional
- Curr√≠culo e programas
- Planejamento de aulas
- Objetivos de aprendizagem
- Avalia√ß√£o educacional
- Adapta√ß√£o curricular

## Tecnologia Educacional
- Ferramentas digitais
- Plataformas de ensino
- Realidade virtual e aumentada
- IA na educa√ß√£o
- Educa√ß√£o a dist√¢ncia`,
      status: 'active',
      workspaceId: workspaceSuperAdmin?.id || '',
      userId: superAdmin?.id,
    },
    {
      name: 'Consultor Jur√≠dico',
      description: 'Especialista em consultoria jur√≠dica, an√°lise de contratos e compliance',
      type: 'template',
      config: `role: Legal Consultant
expertise:
  - Consultoria jur√≠dica
  - An√°lise de contratos
  - Compliance
  - Legisla√ß√£o comercial
  - Gest√£o de riscos legais
personality: detalhista, √©tico, anal√≠tico`,
      knowledge: `# Conhecimento do Consultor Jur√≠dico

## Consultoria Jur√≠dica
- Assessoria jur√≠dica
- Opini√£o legal
- Due diligence
- Estrutura√ß√£o de neg√≥cios
- Governan√ßa corporativa

## An√°lise de Contratos
- Elabora√ß√£o de contratos
- Revis√£o contratual
- Negocia√ß√£o de cl√°usulas
- Gest√£o contratual
- Resolu√ß√£o de conflitos

## Compliance e Regula√ß√£o
- Programas de compliance
- Preven√ß√£o √† lavagem de dinheiro
- Prote√ß√£o de dados
- Legisla√ß√£o setorial
- Gest√£o de riscos legais`,
      status: 'active',
      workspaceId: workspaceSuperAdmin?.id || '',
      userId: superAdmin?.id,
    },
    {
      name: 'Agente de Sa√∫de e Bem-estar',
      description: 'Especialista em sa√∫de, bem-estar, nutri√ß√£o e orienta√ß√£o m√©dica b√°sica',
      type: 'template',
      config: `role: Health and Wellness Agent
expertise:
  - Sa√∫de e bem-estar
  - Nutri√ß√£o
  - Orienta√ß√£o m√©dica b√°sica
  - Atividade f√≠sica
  - Sa√∫de mental
personality: cuidadoso, emp√°tico, informativo`,
      knowledge: `# Conhecimento do Agente de Sa√∫de e Bem-estar

## Sa√∫de e Bem-estar
- Promo√ß√£o da sa√∫de
- Preven√ß√£o de doen√ßas
- H√°bitos saud√°veis
- Qualidade de vida
- Bem-estar integral

## Nutri√ß√£o
- Alimenta√ß√£o equilibrada
- Planejamento alimentar
- Suplementa√ß√£o
- Dietas especiais
- Hidrata√ß√£o

## Sa√∫de Mental e F√≠sica
- Gest√£o do estresse
- Atividade f√≠sica
- Sono e descanso
- Sa√∫de emocional
- Autoconhecimento`,
      status: 'active',
      workspaceId: workspaceSuperAdmin?.id || '',
      userId: superAdmin?.id,
    },
    // Agentes Criativos e de Conte√∫do
    {
      name: 'Assistente Criativo',
      description: 'Especialista em cria√ß√£o de conte√∫do, design e comunica√ß√£o criativa',
      type: 'template',
      config: `role: Creative Assistant
expertise:
  - Cria√ß√£o de conte√∫do
  - Design gr√°fico
  - Comunica√ß√£o criativa
  - Storytelling
  - Branding
personality: criativo, inspirador, vers√°til`,
      knowledge: `# Conhecimento do Assistente Criativo

## Cria√ß√£o de Conte√∫do
- Reda√ß√£o criativa
- Conte√∫do para redes sociais
- Copywriting
- Storytelling
- Conte√∫do visual

## Design e Comunica√ß√£o
- Design gr√°fico
- Identidade visual
- Branding
- Comunica√ß√£o visual
- Experi√™ncia do usu√°rio

## Estrat√©gia Criativa
- Brainstorming
- Idea√ß√£o criativa
- Tend√™ncias criativas
- Inova√ß√£o
- Solu√ß√£o criativa de problemas`,
      status: 'active',
      workspaceId: workspaceSuperAdmin?.id || '',
      userId: superAdmin?.id,
    },
    // Agente de Suporte ao Cliente
    {
      name: 'Agente de Suporte ao Cliente',
      description: 'Especialista em atendimento ao cliente, resolu√ß√£o de problemas e gest√£o de relacionamentos',
      type: 'template',
      config: `role: Customer Support Agent
expertise:
  - Atendimento ao cliente
  - Resolu√ß√£o de problemas
  - Gest√£o de relacionamentos
  - Suporte t√©cnico
  - Satisfa√ß√£o do cliente
personality: paciente, prestativo, comunicativo`,
      knowledge: `# Conhecimento do Agente de Suporte ao Cliente

## Atendimento ao Cliente
- Comunica√ß√£o eficaz
- Gest√£o de expectativas
- Escuta ativa
- Empatia
- Resolu√ß√£o de conflitos

## Resolu√ß√£o de Problemas
- Diagn√≥stico de problemas
- Solu√ß√µes criativas
- Tomada de decis√£o
- Gest√£o de crises
- Aprendizado cont√≠nuo

## Gest√£o de Relacionamentos
- Fideliza√ß√£o de clientes
- Prospec√ß√£o de necessidades
- Feedback e melhorias
- CRM e gest√£o de contatos
- M√©tricas de satisfa√ß√£o`,
      status: 'active',
      workspaceId: workspaceSuperAdmin?.id || '',
      userId: superAdmin?.id,
    },
  ];

  for (const agentData of professionalAgentsData) {
    try {
      const agent = await prisma.agent.create({
        data: {
          ...agentData,
          slug: slugify(agentData.name),
        },
      });
      console.log(`‚úÖ Agente profissional criado: ${agent.name}`);
    } catch (error) {
      console.log(`‚ö†Ô∏è Agente profissional j√° existe ou erro ao criar: ${agentData.name}`);
    }
  }

  // Criar agentes b√°sicos para cada workspace
  console.log('ü§ñ Criando agentes b√°sicos...');
  const agentsData = [
    {
      name: 'Assistente Pessoal',
      description: 'Assistente pessoal para tarefas di√°rias',
      type: 'custom',
      config: `role: Assistente Pessoal
expertise:
  - Organiza√ß√£o de tarefas
  - Gerenciamento de tempo
  - Lembretes e alertas
  - Comunica√ß√£o pessoal
personality: prestativo, organizado, amig√°vel`,
      knowledge: `# Conhecimento do Assistente Pessoal

## Funcionalidades
- Gerenciamento de agenda e compromissos
- Cria√ß√£o de lembretes e alertas
- Organiza√ß√£o de tarefas di√°rias
- Sugest√µes de produtividade
- Comunica√ß√£o por email e mensagem

## Habilidades
- Prioriza√ß√£o de tarefas
- Gerenciamento de tempo
- Comunica√ß√£o clara
- Solu√ß√£o de problemas`,
      status: 'active',
      workspaceId: workspaceSuperAdmin?.id || '',
      userId: superAdmin?.id,
    },
    {
      name: 'Especialista em Neg√≥cios',
      description: 'Especialista em an√°lise e estrat√©gia de neg√≥cios',
      type: 'template',
      config: `role: Business Specialist
expertise:
  - An√°lise de mercado
  - Estrat√©gia empresarial
  - Planejamento financeiro
  - Gest√£o de projetos
personality: estrat√©gico, anal√≠tico, profissional`,
      knowledge: `# Conhecimento em Neg√≥cios

## An√°lise de Mercado
- Tend√™ncias de mercado
- An√°lise competitiva
- Oportunidades de crescimento
- Segmenta√ß√£o de clientes

## Estrat√©gia Empresarial
- Planejamento estrat√©gico
- Modelo de neg√≥cios
- Expans√£o de mercado
- Inova√ß√£o e competitividade

## Gest√£o Financeira
- Planejamento financeiro
- An√°lise de investimentos
- Gest√£o de custos
- Otimiza√ß√£o de recursos`,
      status: 'active',
      workspaceId: workspaceCompanyAdmin?.id || '',
      userId: companyAdmin?.id,
    },
    {
      name: 'Agente de Suporte',
      description: 'Agente de suporte t√©cnico e atendimento ao cliente',
      type: 'custom',
      config: `role: Support Agent
expertise:
  - Suporte t√©cnico
  - Atendimento ao cliente
  - Resolu√ß√£o de problemas
  - Documenta√ß√£o
personality: paciente, prestativo, t√©cnico`,
      knowledge: `# Conhecimento em Suporte

## Suporte T√©cnico
- Diagn√≥stico de problemas
- Solu√ß√µes t√©cnicas
- Configura√ß√£o de sistemas
- Manuten√ß√£o preventiva

## Atendimento ao Cliente
- Comunica√ß√£o eficaz
- Gest√£o de expectativas
- Resolu√ß√£o de conflitos
- Satisfa√ß√£o do cliente

## Documenta√ß√£o
- Cria√ß√£o de manuais
- Registro de solu√ß√µes
- Base de conhecimento
- Tutoriais e guias`,
      status: 'active',
      workspaceId: workspaceCompanyUser?.id || '',
      userId: companyUser?.id,
    },
    {
      name: 'Assistente Gratuito',
      description: 'Assistente com funcionalidades b√°sicas',
      type: 'custom',
      config: `role: Basic Assistant
expertise:
  - Respostas r√°pidas
  - Informa√ß√µes gerais
  - Ajuda b√°sica
  - Direcionamento de recursos
personality: simples, direto, √∫til`,
      knowledge: `# Conhecimento B√°sico

## Funcionalidades
- Respostas a perguntas comuns
- Informa√ß√µes gerais
- Ajuda b√°sica
- Direcionamento para recursos

## Limita√ß√µes
- Acesso a recursos b√°sicos
- Sem an√°lise avan√ßada
- Sem integra√ß√µes complexas
- Funcionalidades limitadas`,
      status: 'active',
      workspaceId: workspaceFree?.id || '',
      userId: freeUser?.id,
    },
    {
      name: 'Assistente Iniciante',
      description: 'Assistente com funcionalidades intermedi√°rias',
      type: 'custom',
      config: `role: Intermediate Assistant
expertise:
  - An√°lise b√°sica
  - Organiza√ß√£o de dados
  - Planejamento simples
  - Comunica√ß√£o eficiente
personality: aprendiz, organizado, comunicativo`,
      knowledge: `# Conhecimento Intermedi√°rio

## Funcionalidades
- An√°lise de dados b√°sica
- Organiza√ß√£o de informa√ß√µes
- Planejamento simples
- Comunica√ß√£o eficiente

## Habilidades
- Interpreta√ß√£o de dados
- Organiza√ß√£o l√≥gica
- Planejamento estruturado
- Comunica√ß√£o clara`,
      status: 'active',
      workspaceId: workspaceIniciante?.id || '',
      userId: inicianteUser?.id,
    },
    {
      name: 'Assistente Profissional',
      description: 'Assistente com funcionalidades completas',
      type: 'custom',
      config: `role: Professional Assistant
expertise:
  - An√°lise avan√ßada
  - Estrat√©gia complexa
  - Gest√£o completa
  - Integra√ß√£o total
personality: experiente, estrat√©gico, completo`,
      knowledge: `# Conhecimento Profissional

## Funcionalidades
- An√°lise avan√ßada de dados
- Estrat√©gia complexa
- Gest√£o completa de projetos
- Integra√ß√£o total de sistemas

## Habilidades
- Tomada de decis√£o estrat√©gica
- Gest√£o de recursos complexos
- An√°lise preditiva
- Otimiza√ß√£o de processos`,
      status: 'active',
      workspaceId: workspaceProfissional?.id || '',
      userId: profissionalUser?.id,
    },
  ];

  for (const agentData of agentsData) {
    try {
      const agent = await prisma.agent.create({
        data: {
          ...agentData,
          slug: slugify(agentData.name),
        },
      });
      console.log(`‚úÖ Agente criado: ${agent.name}`);
    } catch (error) {
      console.log(`‚ö†Ô∏è Agente j√° existe ou erro ao criar: ${agentData.name}`);
    }
  }

  console.log('üéâ Backup seed conclu√≠do com sucesso!');
  console.log('üìä Resumo dos dados criados:');
  console.log(`- Usu√°rios: ${usersData.length}`);
  console.log(`- Empresas: ${companiesData.length}`);
  console.log(`- Clientes: ${clientsData.length}`);
  console.log(`- Workspaces: ${workspacesData.length}`);
  console.log(`- Agentes Profissionais: ${professionalAgentsData.length}`);
  console.log(`- Agentes B√°sicos: ${agentsData.length}`);
  console.log(`- Total de Agentes: ${professionalAgentsData.length + agentsData.length}`);
  console.log('');
  console.log('üìã Pap√©is dispon√≠veis:');
  console.log('- SUPER_ADMIN: Acesso total ao sistema');
  console.log('- COMPANY_ADMIN: Administra√ß√£o empresarial');
  console.log('- COMPANY_USER: Acesso empresarial limitado');
  console.log('- FREE: Usu√°rio gratuito com funcionalidades b√°sicas');
  console.log('- INICIANTE: Usu√°rio com funcionalidades intermedi√°rias');
  console.log('- PROFISSIONAL: Usu√°rio com todas as funcionalidades');
  console.log('');
  console.log('üéØ Templates Profissionais (SuperAdmin):');
  console.log('- Consultor de Estrat√©gia');
  console.log('- Especialista em Dados');
  console.log('- Agente de Automa√ß√£o Inteligente');
  console.log('- Arquiteto de Workflows');
  console.log('- Integrador Flowise');
  console.log('- Agente de Vendas');
  console.log('- Agente de Marketing Digital');
  console.log('- Consultor de TI');
  console.log('- Assistente de E-commerce');
  console.log('- Especialista em Log√≠stica');
  console.log('- Agente de Recursos Humanos');
  console.log('- Consultor Financeiro');
  console.log('- Especialista em Educa√ß√£o');
  console.log('- Consultor Jur√≠dico');
  console.log('- Agente de Sa√∫de e Bem-estar');
  console.log('- Assistente Criativo');
  console.log('- Agente de Suporte ao Cliente');
}

main()
  .catch((e) => {
    console.error('‚ùå Erro durante o backup seed:', e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });